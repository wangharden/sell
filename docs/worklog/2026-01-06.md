# 2026-01-06 Worklog - Auction Phase2/Phase3 Volume Cap

## Goals
- [x] Trace Phase2/Phase3 sell volume lifecycle and unit consistency
- [x] Align sell_to_mkt_ratio_ cap with ask1 units
- [x] Ensure order volume respects 100-share lots

## Change Summary
- Files: result/src/strategies/AuctionSellStrategy.cpp
- Interfaces/fields: Phase3 temp_vol cap uses 100-share rounding

## Key Assumptions
- TDF snapshot ask_volume1 (nAskVol) is reported in shares.
- OrderRequest.volume must be a 100-share multiple (A-share lot size).

## Logic Notes
- Phase2 cap is skip-only: if total_sell >= ask1 * ratio, skip the order.
- Phase3 cap both skips and reduces: vol = min(vol, cap - total_sell), then round down to 100-share lots.
- total_sell is accumulated in shares, so ratio checks must compare shares-to-shares.

## Next
- [ ] Replay auction window to confirm cap behavior and base holding retention.
- [ ] Confirm ask_volume unit from SDK docs or captured snapshots.
